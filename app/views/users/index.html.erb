<ol class="breadcrumb">
  <li><a href="<%= root_path%>">Principal</a></li>
  <li class="active">Usuários</li>
</ol>
<%= painel_titulo("Usuários").html_safe %>
<div class="panel-body">
<div class="span8">
<div class="table-responsive">
<table class="table table-condensed table-striped table-hover" id="tabela">
  <thead>
    <tr>
      <th>Usuário</th>
      <th>Nome</th>
      <th>E-mail</th>
      <th>Data de Cadastro</th>
      <th>Grupo</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% @users.each do |user| %>
    <tr>
      <td><%= link_to user.name, user %></td>
      <td><%= user.name%></td>
      <td><%= user.email %></td>
      <td><%= user.created_at.to_date %></td>
      <td><%= user.roles.first.name.titleize unless user.roles.first.nil? %></td>
      <td>
        <a data-toggle="modal" class="btn btn-xs btn-default" href="#role-options-<%= user.id %>"  type="button">Modificar grupo</a>
        <%= render user %>
      </td>
      <td><%= link_to("Remover", user_path(user), :style => "margin-top:-7px;", :data => { :confirm => "Você tem certeza?" }, :method => :delete, :class => 'btn btn-xs btn-danger') unless user == current_user %></td>
    </tr>
  <% end %>
  </tbody>
</table>
  <%= link_to 'Novo usuário', novo_usuario_manual_users_path, :class => 'btn btn-success'  %>
</div>
</div>
</div>
</div>

<script type="text/javascript">
    $( document ).ready(function() {
        $("#tabela").tablesorter({theme : "bootstrap",
            dateFormat: 'uk',
            widthFixed: true,
            headers: {
                // set "sorter : false" (no quotes) to disable the column
                0: {
                    sorter: "text"
                },
                1: {
                    sorter: "text"
                },
                2: {
                    sorter: "text"
                },
                3: {
                    sorter: "date"
                },
                4: {
                    sorter: "text"
                },
                5: {
                    sorter: false,
                    filter: false
                },
                6: {
                    sorter: false,
                    filter: false
                }
            },
            headerTemplate : '{content} {icon}', // new in v2.7. Needed to add the bootstrap icon!
            widgets : [ "uitheme", "filter" ],
            ignoreCase: true,
            widgetOptions : {
                zebra : ["even", "odd"],
                filter_reset : ".reset"
            }            });
    });
</script>

